---
import { Image } from 'astro:assets';
import type { Publications } from '../pages/publications/publications';

interface Props {
  publication: Publications;
}

const { publication } = Astro.props;
---

<div class="group flex flex-col h-full overflow-hidden rounded-xl glass-panel hover:scale-[1.015] transition-all duration-300">
  <div class="aspect-video w-full overflow-hidden bg-zinc-100 dark:bg-zinc-800 relative">
    {publication.coverImage && (
      <Image
        src={publication.coverImage}
        alt={publication.name}
        class="h-full w-full object-cover object-center transition-transform duration-300 group-hover:scale-105"
        width={720}
        height={360}
      />
    )}
    {!publication.coverImage && (
      <div class="flex h-full items-center justify-center text-zinc-400 dark:text-zinc-600">
        <span class="text-sm">No Image</span>
      </div>
    )}
  </div>
  <div class="flex flex-1 flex-col p-5">
    <div class="mb-2 text-sm text-zinc-500 dark:text-zinc-400">
      {publication.journal} - {publication.year}
    </div>
    <h3 class="mb-2 text-xl font-bold leading-tight text-zinc-900 dark:text-zinc-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors">
      <a href={publication.paperLink} target="_blank" rel={publication.paperLinkRel}>{publication.name}</a>
    </h3>
    <p class="mb-4 flex-1 text-sm leading-relaxed text-zinc-600 dark:text-zinc-400 line-clamp-3">
      {publication.abstract}
    </p>
    <div class="flex justify-end gap-3 mt-auto self-end">
      <details class="relative">
        <summary class="tag-pill cursor-pointer">Cite</summary>
        <pre class="absolute bottom-full right-0 mb-2 p-2 bg-gray-100 dark:bg-zinc-800 rounded text-xs overflow-x-auto w-64 max-h-48 z-10" style="white-space: pre-wrap; word-break: break-all;">
          {publication.bibtex}
        </pre>
      </details>
      {
          publication.pdf &&
          <a class="tag-pill" href={publication.pdf} target="_blank" rel={publication.paperLinkRel}>
              PDF
          </a>
      }
      {
          publication.paperLink &&
          <a class="tag-pill" href={publication.paperLink} target="_blank" rel={publication.paperLinkRel}>
              Paper
          </a>
      }
    </div>
  </div>
</div>
